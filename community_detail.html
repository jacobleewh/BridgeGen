{% extends "base.html" %}

{% block title %}{{ community.name }} - BridgeGen{% endblock %}

{% block content %}
<div class="mb-4">
    <a href="/communities" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i> Back to Communities
    </a>
</div>

<div class="card mb-4" style="border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
    <div style="height: 250px; background: var(--gradient); position: relative; overflow: hidden;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 6rem; color: white; opacity: 0.2;">
            {% if community.category == 'tech' %}
                <i class="bi bi-laptop"></i>
            {% elif community.category == 'arts' %}
                <i class="bi bi-palette"></i>
            {% elif community.category == 'sports' %}
                <i class="bi bi-trophy"></i>
            {% elif community.category == 'education' %}
                <i class="bi bi-book"></i>
            {% elif community.category == 'social' %}
                <i class="bi bi-people"></i>
            {% else %}
                <i class="bi bi-heart"></i>
            {% endif %}
        </div>
        <div class="position-absolute bottom-0 start-0 p-4 text-white w-100" style="background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);">
            <div class="d-flex justify-content-between align-items-end">
                <div>
                    <h2 class="text-white mb-2">{{ community.name }}</h2>
                    <span class="badge bg-light text-dark me-2">
                        <i class="bi bi-globe"></i> Public
                    </span>
                    {% if is_creator %}
                        <span class="badge bg-warning text-dark me-2">
                            <i class="bi bi-star-fill"></i> Creator
                        </span>
                    {% endif %}
                    <span class="category-badge category-{{ community.category }}">
                        {{ community.category|title }}
                    </span>
                </div>
                <div>
                    {% if is_creator %}
                        <form method="POST" action="/communities/{{ community.id }}/delete" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this community? This action cannot be undone!');">
                            <button type="submit" class="btn btn-danger btn-lg me-2">
                                <i class="bi bi-trash"></i> Delete Community
                            </button>
                        </form>
                    {% endif %}
                    {% if not is_member %}
                        <a href="/communities/{{ community.id }}/join" class="btn btn-light btn-lg">
                            <i class="bi bi-plus-circle"></i> Join Community
                        </a>
                    {% else %}
                        <span class="badge bg-success me-2" style="font-size: 1rem; padding: 10px 15px;">
                            <i class="bi bi-check-circle"></i> Member
                        </span>
                        {% if not is_creator %}
                            <a href="/communities/{{ community.id }}/leave" class="btn btn-outline-light btn-lg" onclick="return confirm('Are you sure you want to leave this community?')">
                                <i class="bi bi-x-circle"></i> Leave
                            </a>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="card-body p-4">
        <p class="lead text-muted mb-4">{{ community.description }}</p>
        <div class="d-flex align-items-center gap-4">
            <div>
                <i class="bi bi-people-fill" style="color: var(--primary-color); font-size: 1.5rem;"></i>
                <strong class="ms-2">{{ community.member_count }} members</strong>
            </div>
            <div>
                <i class="bi bi-calendar" style="color: var(--primary-color); font-size: 1.5rem;"></i>
                <span class="ms-2">Created {{ community.created_at.strftime('%B %Y') }}</span>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card mb-4">
            <div class="card-header" style="background: var(--gradient); color: white;">
                <h5 class="mb-0">
                    <i class="bi bi-chat-dots"></i> Discussion
                </h5>
            </div>
            <div class="card-body text-center py-5">
                <div style="font-size: 4rem; color: #ccc; margin-bottom: 20px;">
                    <i class="bi bi-chat-left-text"></i>
                </div>
                <p class="lead text-muted">No posts yet</p>
                <p class="text-muted">Be the first to share something with the community!</p>
                <button class="btn btn-primary" disabled>
                    <i class="bi bi-plus-circle"></i> Create Post (Coming Soon)
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-header" style="background: var(--gradient-pink); color: white;">
                <h5 class="mb-0">
                    <i class="bi bi-info-circle"></i> About
                </h5>
            </div>
            <div class="card-body">
                <p><strong><i class="bi bi-tag"></i> Category:</strong> 
                    <span class="category-badge category-{{ community.category }}">
                        {{ community.category|title }}
                    </span>
                </p>
                <p><strong><i class="bi bi-calendar-event"></i> Created:</strong> 
                    {{ community.created_at.strftime('%B %d, %Y') }}
                </p>
                <p><strong><i class="bi bi-people"></i> Members:</strong> 
                    {{ community.member_count }}
                </p>
                {% if is_creator %}
                    <hr>
                    <p class="text-muted small mb-2">
                        <i class="bi bi-info-circle"></i> You created this community
                    </p>
                    <form method="POST" action="/communities/{{ community.id }}/delete" onsubmit="return confirm('⚠️ WARNING: Are you sure you want to delete this community? This will permanently remove the community and all memberships. This action cannot be undone!');">
                        <button type="submit" class="btn btn-danger btn-sm w-100">
                            <i class="bi bi-trash"></i> Delete Community
                        </button>
                    </form>
                {% endif %}
            </div>
        </div>
        
        <div class="card">
            <div class="card-header" style="background: var(--gradient); color: white;">
                <h5 class="mb-0">
                    <i class="bi bi-people"></i> Members ({{ community.member_count }})
                </h5>
            </div>
            <div class="card-body text-center py-4">
                <div style="font-size: 3rem; color: #ccc; margin-bottom: 10px;">
                    <i class="bi bi-person-circle"></i>
                </div>
                <p class="text-muted">Member list coming soon</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
