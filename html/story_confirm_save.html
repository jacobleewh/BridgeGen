{% extends "base.html" %}
{% block content %}
<div class="big-card">
  <div class="big-card-header">
    <h4>Changes Saved</h4>
  </div>
  <div class="big-card-body">
    <p>Your changes have been saved successfully.</p>
    {% if story %}
      <h6><strong>{{ story.title }}</strong></h6>
      <p class="text-muted">Updated: {{ story.date }}</p>
      
      {% if story.media and story.media|length > 0 %}
        <div class="mt-3">
          <h6>Media</h6>
          <div class="row">
            {% for m in story.media %}
              <div class="col-md-6 mb-2">
                {% if m.lower().endswith(('.jpg', '.jpeg', '.png', '.gif', '.webp', '.avif')) %}
                  <img src="{{ url_for('static', filename=m.replace('static/', '')) }}" alt="Story media" class="story-media-img">
                {% elif m.lower().endswith(('.mp4', '.webm', '.avi', '.mov', '.mkv')) %}
                  <video controls class="story-media-video">
                    <source src="{{ url_for('static', filename=m.replace('static/', '')) }}" type="video/mp4">
                  </video>
                {% endif %}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    {% endif %}
    <div class="mt-4 d-flex gap-2">
      {% if story %}
        <a class="btn btn-primary" href="{{ url_for('story_my_story', story_id=story.id) }}">View Story</a>
      {% endif %}
      <a class="btn btn-outline-secondary" href="{{ url_for('story_my_stories') }}">Back to My Stories</a>
    </div>
  </div>
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='story_style.css') }}">
<script src="{{ url_for('static', filename='js/story_script.js') }}"></script>
{% endblock %}
